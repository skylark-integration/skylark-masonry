/**
 * skylark-masonry - A version of masonry that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-masonry/
 * @license MIT
 */
!function(t,e){var i=e.define,require=e.require,o="function"==typeof i&&i.amd,n=!o&&"undefined"!=typeof exports;if(!o&&!i){var s={};i=e.define=function(t,e,i){"function"==typeof i?(s[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),o=t.split("/");i.pop();for(var n=0;n<o.length;n++)"."!=o[n]&&(".."==o[n]?i.pop():i.push(o[n]));return i.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):s[t]={factory:null,resolved:!0,exports:i}},require=e.require=function(t){if(!s.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=s[t];if(!module.resolved){var i=[];module.deps.forEach(function(t){i.push(require(t))}),module.exports=module.factory.apply(e,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-masonry/Masonry",["skylark-langx/skylark","skylark-jquery"],function(t,e){"use strict";var i=window.console,o={};function n(t,n){var s=h(t);if(s){this.element=s,e&&(this.$element=e(this.element)),this.options=e.extend({},this.constructor.defaults),this.option(n);var a=++r;this.$element.data("outlayerGUID",a),o[a]=this,this._create();var u=this._getOption("initLayout");u&&this.layout()}else i&&i.error("Bad element for "+this.constructor.namespace+": "+(s||t))}n.namespace="masonry",n.Item=function(t,e){this.element=t,this.layout=e,this.position={x:0,y:0}},n.Item.prototype.getSize=function(){return this.size={outerWidth:$(this.element).outerWidth(!0),outerHeight:$(this.element).outerHeight(!0)}},n.Item.prototype.goTo=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10),$(this.element).css({position:"absolute",left:this.position.x+"px",top:this.position.y+"px"})},n.Item.prototype.moveTo=function(t,e){$(this.element).css({position:"absolute"}),$(this.element).moveto(t,e)},n.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},n.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},n.compatOptions.fitWidth="isFitWidth",n.prototype.getSize=function(){this.size={width:$(this.element).width(),height:$(this.element).height()}},n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0];t&&t.element;this.columnWidth=t&&t.getSize().outerWidth||this.containerWidth}var e=this.columnWidth+=this.gutter,i=this.containerWidth+this.gutter,o=i/e,n=e-i%e,s=n&&n<1?"round":"floor";o=Math[s](o),this.cols=Math.max(o,1)},n.prototype.getContainerWidth=function(){var t=this._getOption("fitWidth"),e=t?this.element.parentNode:this.element;this.containerWidth=$(e).width()},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&e<1?"round":"ceil",o=Math[i](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);for(var n=this._getColGroup(o),s=Math.min.apply(Math,n),r=n.indexOf(s),h={x:this.columnWidth*r,y:s},a=s+t.size.outerHeight,u=this.cols+1-n.length,l=0;l<u;l++)this.colYs[r+l]=a;return h},n.prototype._getColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;o<i;o++){var n=this.colYs.slice(o,o+t);e[o]=Math.max.apply(Math,n)}return e},n.prototype._manageStamp=function(t){var e=getSize(t),i=this._getElementOffset(t),o=this._getOption("originLeft"),n=o?i.left:i.right,s=n+e.outerWidth,r=Math.floor(n/this.columnWidth);r=Math.max(0,r);var h=Math.floor(s/this.columnWidth);h-=s%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var a=this._getOption("originTop"),u=(a?i.top:i.bottom)+e.outerHeight,l=r;l<=h;l++)this.colYs[l]=Math.max(u,this.colYs[l])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth};var s=n.prototype,r=0,h=function(t){return"string"==typeof t?document.querySelector(t):t},a=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},u=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return-1};return s.option=function(t){e.extend(this.options,t)},s._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s._create=function(){this.reloadItems(),e.extend(this.element.style,this.options.containerStyle)},s.reloadItems=function(){this.items=this._itemize(this.element.children)},s._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,o=[],n=0;n<e.length;n++){var s=e[n],r=new i(s,this);o.push(r)}return o},s._filterFindItemElements=function(t){return function(t,i){var o=[];return(t=a(t)).forEach(function(t){if(t instanceof HTMLElement)if(i){e(t).is(i)&&o.push(t);for(var n=t.querySelectorAll(i),s=0;s<n.length;s++)o.push(n[s])}else o.push(t)}),o}(t,this.options.itemSelector)},s.layout=function(){this._resetLayout();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},s._getMeasurement=function(t,e){var i,o=this.options[t];o?("string"==typeof o?i=this.element.querySelector(o):o instanceof HTMLElement&&(i=o),this[t]=i?$(i)[e]():o):this[t]=0},s.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},s._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},s._layoutItems=function(t,e){if(t&&t.length){var i=[];t.forEach(function(t){var o=this._getItemLayoutPosition(t);o.item=t,o.isInstant=e||t.isLayoutInstant,i.push(o)},this),this._processLayoutQueue(i)}},s._processLayoutQueue=function(t){t.forEach(function(t){this._positionItem(t.item,t.x,t.y,t.isInstant)},this)},s._positionItem=function(t,e,i,o){o?t.goTo(e,i):t.moveTo(e,i)},s._postLayout=function(){this.resizeContainer()},s.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},s._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},s.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},s.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},s.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},s.reveal=function(t){t&&t.length&&t.forEach(function(t){})},s.hide=function(t){t&&t.length&&t.forEach(function(t){t.hide()})},s.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},s.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},s.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},s.getItems=function(t){var e=[];return(t=a(t)).forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},s.remove=function(t){var e=this.getItems(t);e&&e.length&&e.forEach(function(t){var e,i;t.element&&t.element.remove(),e=this.items,-1!=(i=u(e,t))&&e.splice(i,1)},this)},t.attach("intg.Masonry",n)}),t("skylark-masonry/main",["./Masonry"],function(t){return t}),t("skylark-masonry",["skylark-masonry/main"],function(t){return t})}(i),!o){var r=require("skylark-langx/skylark");n?module.exports=r:e.skylarkjs=r}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-masonry.js.map
